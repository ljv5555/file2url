<!doctype html>
<html><head>
<title>file2url</title>
<!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script-->
<style>
textarea,input{
display:block;
border:0px solid red;
margin:25px 5% 25px 5%;
padding:25px 3% 25px 3%;
background:#f3f0f0;
color:grey;
width: 84%;
}
textarea{height:320px;background:#f9fcff;}
.info{
	background:silver;
	opacity:.5;
	position:static;
	width:25%;
	right:1em;
	top: 1em;
	min-height:2em;
}
</style>
</head>
<body>
<div class="info" id="info"></div>
<div id="data1" style="display:none;"></div>
<input type="file" id="files1">
<textarea id="ta1"></textarea>
<script>
    function getFileData(cbf)
{
    var fin = document.getElementById('files1');
  var file1 = fin.files[0];
  var reader = new FileReader();
  reader.onload = 
       function(e) {
          var fe = function(e){
           var str =  e.target.result;
          
	   };
	   fe(e);
      };
 reader.readAsDataURL(file1);
    document.getElementById('ta1').innerHTML='reading file; please wait...';
}
setTimeout(function(){
document.getElementById('files1').addEventListener('change', getFileData, false);
},1000);

    
</script>

<script>
	
	function rb(f,jsta,jsto,rc){
                var reader = new FileReader();
                var start = jsta;
                var stop = jsto;
                var blob = f.slice(start, stop);
                reader.onloadend = function(evt) {
                  if (evt.target.readyState == FileReader.DONE) { 
                      var ostr = ''+evt.target.result;
                      var ostr2 = btoa(ostr);
                      var table = jQuery('<table/>');
                      var tr = jQuery('<tr/>');
                      var td1 = jQuery('<td/>').text(''+start);
                      var td2 = jQuery('<td/>').text(''+stop);                      
                      var td3 = jQuery('<td/>').text(''+ostr);
                      var td4 = jQuery('<td/>').text(''+ostr2);
                      tr.append(td1).append(td2).append(td3).append(td4);
                      table.append(tr);
                      var tw = jQuery('<div class="tw"/>').append(table);
                      jQuery('.'+rc).append(tw);             
                  }
                };
                reader.readAsBinaryString(blob);
}
       
function pfiles(files)
{
    window.fa=files;
    var output = [];
    var j = 0;    
    for(var i = 0;i<files.length;i++)
    {
        var f = files[i];
        var fr = new FileReader();
        jQuery('.pout').append('<div><ul><li><b>', 
                    jQuery('<div/>').text(f.name).html(),
                    '</b><ul>',
                    '<li>',
                    f.type || 'n/a',
                    '</li>',
                    '<li>',
                    f.size,
                    ' bytes</li><li>last modified: ',
                    f.lastModifiedDate ? 
                            f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li></ul></div>');
        for(j=0;j<f.size;j+=3)
        {
            var s = j;
            var e = j+3;
            while(e>=f.size){e--;}
            jQuery('.pout').append(jQuery('<div class="rc_'+j+'"></div>'));
            var v1 = f;
            var v2 = s+0;
            var v3 = e+0;
            var v4 = 'rc_'+j;
            rb(v1,v2,v3,v4);
        }
    }
    
    //jQuery('.pout').html(output.join(''));
    
};
	
</script>

</body>
</html>
